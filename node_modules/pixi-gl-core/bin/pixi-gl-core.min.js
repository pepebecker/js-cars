!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var EMPTY_ARRAY_BUFFER=new ArrayBuffer(0),Buffer=function(gl,type,data,drawType){this.gl=gl,this.buffer=gl.createBuffer(),this.type=type||gl.ARRAY_BUFFER,this.drawType=drawType||gl.STATIC_DRAW,this.data=EMPTY_ARRAY_BUFFER,data&&this.upload(data)};Buffer.prototype.upload=function(data,offset,dontBind){dontBind||this.bind();var gl=this.gl;data=data||this.data,offset=offset||0,this.data.byteLength>=data.byteLength?gl.bufferSubData(this.type,offset,data):gl.bufferData(this.type,data,this.drawType),this.data=data},Buffer.prototype.bind=function(){var gl=this.gl;gl.bindBuffer(this.type,this.buffer)},Buffer.createVertexBuffer=function(gl,data,drawType){return new Buffer(gl,gl.ARRAY_BUFFER,data,drawType)},Buffer.createIndexBuffer=function(gl,data,drawType){return new Buffer(gl,gl.ELEMENT_ARRAY_BUFFER,data,drawType)},Buffer.create=function(gl,type,data,drawType){return new Buffer(gl,type,drawType)},Buffer.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},module.exports=Buffer},{}],2:[function(require,module,exports){"use strict";var Texture=require("./GLTexture"),Framebuffer=function(gl,width,height){this.gl=gl,this.framebuffer=gl.createFramebuffer(),this.stencil=null,this.texture=null,this.width=width||100,this.height=height||100};Framebuffer.prototype.enableTexture=function(texture){var gl=this.gl;this.texture=texture||new Texture(gl),this.texture.bind(),this.bind(),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,this.texture.texture,0)},Framebuffer.prototype.enableStencil=function(){if(!this.stencil){var gl=this.gl;this.stencil=gl.createRenderbuffer(),gl.bindRenderbuffer(gl.RENDERBUFFER,this.stencil),gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_STENCIL_ATTACHMENT,gl.RENDERBUFFER,this.stencil),gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_STENCIL,this.width,this.height)}},Framebuffer.prototype.clear=function(r,g,b,a){this.bind();var gl=this.gl;gl.clearColor(r,g,b,a),gl.clear(gl.COLOR_BUFFER_BIT)},Framebuffer.prototype.bind=function(){var gl=this.gl;this.texture&&this.texture.unbind(),gl.bindFramebuffer(gl.FRAMEBUFFER,this.framebuffer)},Framebuffer.prototype.unbind=function(){var gl=this.gl;gl.bindFramebuffer(gl.FRAMEBUFFER,null)},Framebuffer.prototype.resize=function(width,height){var gl=this.gl;this.width=width,this.height=height,this.texture&&this.texture.uploadData(null,width,height),this.stencil&&(gl.bindRenderbuffer(gl.RENDERBUFFER,this.stencil),gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_STENCIL,width,height))},Framebuffer.prototype.destroy=function(){var gl=this.gl;this.texture&&this.texture.destroy(),gl.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},Framebuffer.createRGBA=function(gl,width,height){var texture=Texture.fromData(gl,null,width,height);texture.enableNearestScaling(),texture.enableWrapClamp();var fbo=new Framebuffer(gl,width,height);return fbo.enableTexture(texture),fbo.unbind(),fbo},Framebuffer.createFloat32=function(gl,width,height,data){var texture=new Texture.fromData(gl,data,width,height);texture.enableNearestScaling(),texture.enableWrapClamp();var fbo=new Framebuffer(gl,width,height);return fbo.enableTexture(texture),fbo.unbind(),fbo},module.exports=Framebuffer},{"./GLTexture":4}],3:[function(require,module,exports){"use strict";var compileProgram=require("./shader/compileProgram"),extractAttributes=require("./shader/extractAttributes"),extractUniforms=require("./shader/extractUniforms"),generateUniformAccessObject=require("./shader/generateUniformAccessObject"),Shader=function(gl,vertexSrc,fragmentSrc){this.gl=gl,this.program=compileProgram(gl,vertexSrc,fragmentSrc),this.attributes=extractAttributes(gl,this.program);var uniformData=extractUniforms(gl,this.program);this.uniforms=generateUniformAccessObject(gl,uniformData)};Shader.prototype.bind=function(){this.gl.useProgram(this.program)},Shader.prototype.destroy=function(){},module.exports=Shader},{"./shader/compileProgram":9,"./shader/extractAttributes":11,"./shader/extractUniforms":12,"./shader/generateUniformAccessObject":13}],4:[function(require,module,exports){"use strict";var Texture=function(gl,width,height,format,type){this.gl=gl,this.texture=gl.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=width||0,this.height=height||0,this.format=format||gl.RGBA,this.type=type||gl.UNSIGNED_BYTE};Texture.prototype.upload=function(source){this.bind();var gl=this.gl;this.width=source.videoWidth||source.width,this.height=source.videoHeight||source.height,gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),gl.texImage2D(gl.TEXTURE_2D,0,this.format,this.format,this.type,source)};var FLOATING_POINT_AVAILABLE=!1;Texture.prototype.uploadData=function(data,width,height){this.bind();var gl=this.gl;if(this.width=width||this.width,this.height=height||this.height,data instanceof Float32Array){if(!FLOATING_POINT_AVAILABLE){var ext=gl.getExtension("OES_texture_float");if(!ext)throw new Error("floating point textures not available");FLOATING_POINT_AVAILABLE=!0}this.type=gl.FLOAT}else this.type=gl.UNSIGNED_BYTE;gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),gl.texImage2D(gl.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,data||null)},Texture.prototype.bind=function(location){var gl=this.gl;void 0!==location&&gl.activeTexture(gl.TEXTURE0+location),gl.bindTexture(gl.TEXTURE_2D,this.texture)},Texture.prototype.unbind=function(){var gl=this.gl;gl.bindTexture(gl.TEXTURE_2D,null)},Texture.prototype.minFilter=function(linear){var gl=this.gl;this.bind(),this.mipmap?gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,linear?gl.LINEAR_MIPMAP_LINEAR:gl.NEAREST_MIPMAP_NEAREST):gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,linear?gl.LINEAR:gl.NEAREST)},Texture.prototype.magFilter=function(linear){var gl=this.gl;this.bind(),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,linear?gl.LINEAR:gl.NEAREST)},Texture.prototype.enableMipmap=function(){var gl=this.gl;this.bind(),this.mipmap=!0,gl.generateMipmap(gl.TEXTURE_2D)},Texture.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},Texture.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},Texture.prototype.enableWrapClamp=function(){var gl=this.gl;this.bind(),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE)},Texture.prototype.enableWrapRepeat=function(){var gl=this.gl;this.bind(),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.REPEAT)},Texture.prototype.enableWrapMirrorRepeat=function(){var gl=this.gl;this.bind(),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.MIRRORED_REPEAT),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.MIRRORED_REPEAT)},Texture.prototype.destroy=function(){var gl=this.gl;gl.deleteTexture(this.texture)},Texture.fromSource=function(gl,source,premultiplyAlpha){var texture=new Texture(gl);return texture.premultiplyAlpha=premultiplyAlpha||!1,texture.upload(source),texture},Texture.fromData=function(gl,data,width,height){var texture=new Texture(gl);return texture.uploadData(data,width,height),texture},module.exports=Texture},{}],5:[function(require,module,exports){"use strict";function VertexArrayObject(gl,state){if(this.nativeVaoExtension=null,VertexArrayObject.FORCE_NATIVE||(this.nativeVaoExtension=gl.getExtension("OES_vertex_array_object")||gl.getExtension("MOZ_OES_vertex_array_object")||gl.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=state,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var maxAttribs=gl.getParameter(gl.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(maxAttribs),attribState:new Array(maxAttribs)}}this.gl=gl,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var setVertexAttribArrays=require("./setVertexAttribArrays");VertexArrayObject.prototype.constructor=VertexArrayObject,module.exports=VertexArrayObject,VertexArrayObject.FORCE_NATIVE=!1,VertexArrayObject.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},VertexArrayObject.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},VertexArrayObject.prototype.activate=function(){for(var gl=this.gl,lastBuffer=null,i=0;i<this.attributes.length;i++){var attrib=this.attributes[i];lastBuffer!==attrib.buffer&&(attrib.buffer.bind(),lastBuffer=attrib.buffer),gl.vertexAttribPointer(attrib.attribute.location,attrib.attribute.size,attrib.type||gl.FLOAT,attrib.normalized||!1,attrib.stride||0,attrib.start||0)}return setVertexAttribArrays(gl,this.attributes,this.nativeState),this.indexBuffer.bind(),this},VertexArrayObject.prototype.addAttribute=function(buffer,attribute,type,normalized,stride,start){return this.attributes.push({buffer:buffer,attribute:attribute,location:attribute.location,type:type||this.gl.FLOAT,normalized:normalized||!1,stride:stride||0,start:start||0}),this.dirty=!0,this},VertexArrayObject.prototype.addIndex=function(buffer){return this.indexBuffer=buffer,this.dirty=!0,this},VertexArrayObject.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},VertexArrayObject.prototype.draw=function(type,size,start){var gl=this.gl;return gl.drawElements(type,size,gl.UNSIGNED_SHORT,start||0),this},VertexArrayObject.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null}},{"./setVertexAttribArrays":8}],6:[function(require,module,exports){"use strict";var createContext=function(canvas,options){var gl=canvas.getContext("webgl",options)||canvas.getContext("experimental-webgl",options);if(!gl)throw new Error("This browser does not support webGL. Try using the canvas renderer");return gl};module.exports=createContext},{}],7:[function(require,module,exports){"use strict";var gl={createContext:require("./createContext"),setVertexAttribArrays:require("./setVertexAttribArrays"),GLBuffer:require("./GLBuffer"),GLFramebuffer:require("./GLFramebuffer"),GLShader:require("./GLShader"),GLTexture:require("./GLTexture"),VertexArrayObject:require("./VertexArrayObject"),shader:require("./shader")};"undefined"!=typeof module&&module.exports&&(module.exports=gl),"undefined"!=typeof window&&(window.pixi={gl:gl})},{"./GLBuffer":1,"./GLFramebuffer":2,"./GLShader":3,"./GLTexture":4,"./VertexArrayObject":5,"./createContext":6,"./setVertexAttribArrays":8,"./shader":14}],8:[function(require,module,exports){"use strict";var setVertexAttribArrays=function(gl,attribs,state){var i;if(state){var tempAttribState=state.tempAttribState,attribState=state.attribState;for(i=0;i<tempAttribState.length;i++)tempAttribState[i]=!1;for(i=0;i<attribs.length;i++)tempAttribState[attribs[i].attribute.location]=!0;for(i=0;i<attribState.length;i++)attribState[i]!==tempAttribState[i]&&(attribState[i]=tempAttribState[i],state.attribState[i]?gl.enableVertexAttribArray(i):gl.disableVertexAttribArray(i))}else for(i=0;i<attribs.length;i++){var attrib=attribs[i];gl.enableVertexAttribArray(attrib.attribute.location)}};module.exports=setVertexAttribArrays},{}],9:[function(require,module,exports){"use strict";var compileProgram=function(gl,vertexSrc,fragmentSrc){var glVertShader=compileShader(gl,gl.VERTEX_SHADER,vertexSrc),glFragShader=compileShader(gl,gl.FRAGMENT_SHADER,fragmentSrc),program=gl.createProgram();return gl.attachShader(program,glVertShader),gl.attachShader(program,glFragShader),gl.linkProgram(program),gl.getProgramParameter(program,gl.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",gl.getProgramParameter(program,gl.VALIDATE_STATUS)),console.error("gl.getError()",gl.getError()),""!==gl.getProgramInfoLog(program)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",gl.getProgramInfoLog(program)),gl.deleteProgram(program),program=null),gl.deleteShader(glVertShader),gl.deleteShader(glFragShader),program},compileShader=function(gl,type,src){var shader=gl.createShader(type);return gl.shaderSource(shader,src),gl.compileShader(shader),gl.getShaderParameter(shader,gl.COMPILE_STATUS)?shader:(console.log(gl.getShaderInfoLog(shader)),null)};module.exports=compileProgram},{}],10:[function(require,module,exports){"use strict";var defaultValue=function(type,size){switch(type){case"float":return 0;case"vec2":return new Float32Array(2*size);case"vec3":return new Float32Array(3*size);case"vec4":return new Float32Array(4*size);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*size);case"ivec3":return new Int32Array(3*size);case"ivec4":return new Int32Array(4*size);case"bool":return!1;case"bvec2":return booleanArray(2*size);case"bvec3":return booleanArray(3*size);case"bvec4":return booleanArray(4*size);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},booleanArray=function(size){for(var array=new Array(size),i=0;i<array.length;i++)array[i]=!1;return array};module.exports=defaultValue},{}],11:[function(require,module,exports){"use strict";var mapType=require("./mapType"),mapSize=require("./mapSize"),extractAttributes=function(gl,program){for(var attributes={},totalAttributes=gl.getProgramParameter(program,gl.ACTIVE_ATTRIBUTES),i=0;totalAttributes>i;i++){var attribData=gl.getActiveAttrib(program,i),type=mapType(gl,attribData.type);attributes[attribData.name]={type:type,size:mapSize(type),location:gl.getAttribLocation(program,attribData.name),pointer:pointer}}return attributes},pointer=function(type,normalized,stride,start){gl.vertexAttribPointer(this.location,this.size,type||gl.FLOAT,normalized||!1,stride||0,start||0)};module.exports=extractAttributes},{"./mapSize":15,"./mapType":16}],12:[function(require,module,exports){"use strict";var mapType=require("./mapType"),defaultValue=require("./defaultValue"),extractUniforms=function(gl,program){for(var uniforms={},totalUniforms=gl.getProgramParameter(program,gl.ACTIVE_UNIFORMS),i=0;totalUniforms>i;i++){var uniformData=gl.getActiveUniform(program,i),name=uniformData.name.replace(/\[.*?\]/,""),type=mapType(gl,uniformData.type);uniforms[name]={type:type,size:uniformData.size,location:gl.getUniformLocation(program,name),value:defaultValue(type,uniformData.size)}}return uniforms};module.exports=extractUniforms},{"./defaultValue":10,"./mapType":16}],13:[function(require,module,exports){"use strict";var generateUniformAccessObject=function(gl,uniformData){var uniforms={data:{}};uniforms.gl=gl;for(var uniformKeys=Object.keys(uniformData),i=0;i<uniformKeys.length;i++){var fullName=uniformKeys[i],nameTokens=fullName.split("."),name=nameTokens[nameTokens.length-1],uniformGroup=getUniformGroup(nameTokens,uniforms),uniform=uniformData[fullName];uniformGroup.data[name]=uniform,uniformGroup.gl=gl,Object.defineProperty(uniformGroup,name,{get:generateGetter(name),set:generateSetter(name,uniform)})}return uniforms},generateGetter=function(name){var template=getterTemplate.replace("%%",name);return new Function(template)},generateSetter=function(name,uniform){var setTemplate,template=setterTemplate.replace(/%%/g,name);return setTemplate=1===uniform.size?GLSL_TO_SINGLE_SETTERS[uniform.type]:GLSL_TO_ARRAY_SETTERS[uniform.type],setTemplate&&(template+="\nthis.gl."+setTemplate+";"),new Function("value",template)},getUniformGroup=function(nameTokens,uniform){for(var cur=uniform,i=0;i<nameTokens.length-1;i++){var o=cur[nameTokens[i]]||{data:{}};cur[nameTokens[i]]=o,cur=o}return cur},getterTemplate=["return this.data.%%.value;"].join("\n"),setterTemplate=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),GLSL_TO_SINGLE_SETTERS={"float":"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])","int":"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},GLSL_TO_ARRAY_SETTERS={"float":"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)","int":"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};module.exports=generateUniformAccessObject},{}],14:[function(require,module,exports){"use strict";module.exports={compileProgram:require("./compileProgram"),defaultValue:require("./defaultValue"),extractAttributes:require("./extractAttributes"),extractUniforms:require("./extractUniforms"),generateUniformAccessObject:require("./generateUniformAccessObject"),mapSize:require("./mapSize"),mapType:require("./mapType")}},{"./compileProgram":9,"./defaultValue":10,"./extractAttributes":11,"./extractUniforms":12,"./generateUniformAccessObject":13,"./mapSize":15,"./mapType":16}],15:[function(require,module,exports){"use strict";var mapSize=function(type){return GLSL_TO_SIZE[type]},GLSL_TO_SIZE={"float":1,vec2:2,vec3:3,vec4:4,"int":1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};module.exports=mapSize},{}],16:[function(require,module,exports){"use strict";var mapSize=function(gl,type){if(!GL_TABLE){var typeNames=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(var i=0;i<typeNames.length;++i){var tn=typeNames[i];GL_TABLE[gl[tn]]=GL_TO_GLSL_TYPES[tn]}}return GL_TABLE[type]},GL_TABLE=null,GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};module.exports=mapSize},{}]},{},[7]);
